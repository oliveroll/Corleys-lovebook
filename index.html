<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Corley ‚ù§Ô∏è Oliver</title>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <div class="bg"></div>
  <canvas id="particleCanvas" aria-hidden="true"></canvas>

  <header class="topbar">
    <div class="brand">Corley ‚ù§Ô∏è Oliver</div>
    <div class="topbarRight">
      <!-- Music controls -->
      <div class="musicControls" role="group" aria-label="Music controls">
        <button class="tinyBtn" id="musicToggle" aria-label="Play music" aria-pressed="false" title="Play music">&#9654;</button>
        <input type="range" id="volumeSlider" class="volumeSlider" min="0" max="1" step="0.05" value="0.35" aria-label="Volume" title="Volume"/>
        <button class="tinyBtn" id="muteToggle" aria-label="Mute" aria-pressed="false" title="Mute">&#9835;</button>
      </div>
      <!-- Theme toggle -->
      <button class="tinyBtn" id="themeToggle" aria-label="Switch to minimal theme" title="Switch theme">&#127769;</button>
      <!-- Page navigation -->
      <nav class="nav" aria-label="Page navigation">
        <button class="navBtn navActive" data-go="cover">Cover</button>
        <button class="navBtn" data-go="intro">Intro</button>
        <button class="navBtn" data-go="chapters">Chapters</button>
        <button class="navBtn" data-go="gallery">Gallery</button>
        <button class="navBtn" data-go="wouldyourather">Would You Rather</button>
        <button class="navBtn" data-go="bingo2026">2026 Bingo</button>
        <button class="navBtn" data-go="final">Final</button>
      </nav>
    </div>
  </header>

  <main class="container">

    <!-- COVER -->
    <section id="cover" class="panel active panel-visible" aria-label="Cover page">
      <div class="landingPage">
        <div class="floatingHearts" aria-hidden="true"></div>
        <div class="landingContent">
          <h1 class="landingTitle">Happy Valentine, Corley ‚ù§Ô∏è</h1>
          <p class="landingSubtitle">You're the best thing that ever happened to me!</p>
          <p class="landingHint">ps. press the music button on the top</p>
          <button class="primaryLarge landingButton" data-next="intro">Open the book &rarr;</button>
        </div>
      </div>
    </section>

    <!-- INTRO -->
    <section id="intro" class="panel" aria-label="Introduction">
      <div class="introHero">
        <div class="introContent">
          <h2 class="introTitle">Introduction</h2>
          <p class="introLetter" id="introLetter"></p>
          <div class="introActions">
            <button class="ghostLarge" data-prev="cover">&larr; Back</button>
            <button class="primaryLarge" data-next="chapters">Chapter 1 &rarr;</button>
          </div>
        </div>
      </div>
    </section>

    <!-- CHAPTERS -->
    <section id="chapters" class="panel" aria-label="Chapters">
      <!-- LOVE MAP GAME - TWO COLUMN LAYOUT -->
      <div class="gameContainer">
        <!-- LEFT: CHAPTER SELECTION -->
        <div class="card chapterSelectionCard">
          <h2>Our 2025 Story</h2>
          <p class="muted">4 Chapters. One Journey.</p>
          <div class="chaptersList" id="chaptersList"></div>
          <div class="gameNavActions">
            <button class="ghost" data-prev="intro">&larr; Back</button>
            <button class="primary" data-next="gallery">Gallery &rarr;</button>
          </div>
        </div>

        <!-- RIGHT: ACTIVE GAME MAP -->
        <div class="card gameCard" id="gameCard" aria-label="Love Map Game">
          <div class="gameMapHeader" id="gameMapHeader">
            <h3 id="activeChapterTitle">Select a chapter to begin</h3>
          </div>

          <!-- Animated path map -->
          <div class="gameMap" id="gameMap" aria-hidden="true"></div>

          <!-- Question area -->
          <div class="gameQuestion" id="gameQuestion"></div>

          <!-- Result area (hidden until game ends) -->
          <div class="gameResult" id="gameResult" aria-live="polite"></div>
          
          <!-- Mini Slideshows Container -->
          <div class="miniSlideshowsContainer" id="slideshowsContainer" aria-hidden="true"></div>
        </div>
      </div>
    </section>

    <!-- GALLERY -->
    <section id="gallery" class="panel" aria-label="Photo gallery">
      <div class="card">
        <div class="galleryHeader">
          <h2>Gallery</h2>
          <p class="muted">Click a photo for slideshow.</p>
        </div>
        <div class="photoGrid" id="photoGrid"></div>

        <div class="actions">
          <button class="ghost" data-prev="chapters">&larr; Back</button>
          <button class="primary" data-next="wouldyourather">Would You Rather &rarr;</button>
        </div>
      </div>
    </section>

    <!-- WOULD YOU RATHER GAME -->
    <section id="wouldyourather" class="panel" aria-label="Would You Rather game">
      <div class="wyrContainer">
        <!-- LEFT: SCORE CARD -->
        <div class="card wyrScoreCard">
          <h2>Would You Rather?</h2>
          <p class="muted">How well do you know each other?</p>
          
          <div class="wyrScoreDisplay">
            <div class="wyrScoreNumber" id="wyrScore">0</div>
            <div class="wyrScoreLabel">Matches</div>
          </div>
          
          <div class="wyrProgress">
            <span id="wyrProgressText">Question 1 of 8</span>
            <div class="wyrProgressBar">
              <div class="wyrProgressFill" id="wyrProgressFill"></div>
            </div>
          </div>
          
          <div class="wyrInfo">
            <p class="wyrInfoText">Answer as Corley. See if you can match Oliver's preferences!</p>
          </div>
          
          <div class="wyrNavActions">
            <button class="ghost" data-prev="gallery">&larr; Back</button>
          </div>
        </div>

        <!-- RIGHT: QUESTION CARD -->
        <div class="card wyrQuestionCard">
          <div class="wyrQuestionArea" id="wyrQuestionArea">
            <h3 class="wyrQuestion" id="wyrQuestionText">Loading...</h3>
            
            <div class="wyrOptions" id="wyrOptions">
              <button class="wyrOption wyrOptionA" id="wyrOptionA" aria-label="Option A">
                <span class="wyrOptionLabel">A</span>
                <span class="wyrOptionText" id="wyrOptionAText">Option A</span>
              </button>
              
              <button class="wyrOption wyrOptionB" id="wyrOptionB" aria-label="Option B">
                <span class="wyrOptionLabel">B</span>
                <span class="wyrOptionText" id="wyrOptionBText">Option B</span>
              </button>
            </div>
            
            <div class="wyrFeedback" id="wyrFeedback" aria-live="polite"></div>
          </div>
          
          <!-- Results Display (hidden initially) -->
          <div class="wyrResults" id="wyrResults" aria-hidden="true">
            <div class="wyrResultsContent">
              <h3 class="wyrResultsTitle">Game Complete!</h3>
              <div class="wyrFinalScore">
                <span class="wyrFinalScoreNumber" id="wyrFinalScore">0</span>
                <span class="wyrFinalScoreLabel">out of 8 matches</span>
              </div>
              <p class="wyrResultsMessage" id="wyrResultsMessage">Great job!</p>
              <div class="wyrResultsActions">
                <button class="primary" id="wyrPlayAgain">Play Again</button>
                <button class="ghost" data-next="bingo2026">Continue to 2026 Bingo &rarr;</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 2026 BINGO -->
    <section id="bingo2026" class="panel" aria-label="2026 Goals Bingo">
      <div class="bingoContainer">
        <div class="bingoHeader">
          <h1 class="bingoTitle">Goals of 2026 for our relationship</h1>
          <p class="bingoSubtitle">Brainstorm together what you want to achieve this year</p>
        </div>
        
        <div class="bingoBoard" id="bingoBoard">
          <!-- 25 cells (5x5) will be generated dynamically -->
        </div>
        
        <div class="bingoLegend">
          <div class="legendItem">
            <span class="legendDot legendEasy"></span>
            <span>Easy</span>
          </div>
          <div class="legendItem">
            <span class="legendDot legendMedium"></span>
            <span>Medium</span>
          </div>
          <div class="legendItem">
            <span class="legendDot legendDifficult"></span>
            <span>Difficult</span>
          </div>
        </div>
        
        <div class="bingoActions">
          <button class="ghost" data-prev="wouldyourather">&larr; Back</button>
          <button class="primary" id="bingoSavePDF">üíæ Save as PDF</button>
          <button class="ghost" id="bingoClearAll">Clear All</button>
          <button class="primary" data-next="final">Continue &rarr;</button>
        </div>
      </div>
    </section>

    <!-- FINAL -->
    <section id="final" class="panel" aria-label="Final message">
      <div class="finalLanding">
        <div class="floatingHearts" aria-hidden="true"></div>
        <div class="finalContent">
          <h1 class="finalTitle">One Last Thing... ‚ù§Ô∏è</h1>
          <p class="finalQuestion">Will you be my Valentine?</p>
          <div class="valentineButtons" id="valentineButtons">
            <button class="primaryLarge yesButton" id="yesBtn">Yes! ‚ù§Ô∏è</button>
            <button class="ghostLarge noButton" id="noBtn">No</button>
          </div>
          <div class="finalRevealBox" id="revealBox" aria-hidden="true">
            <p class="finalMessage" id="finalMessage"></p>
          </div>
          <div class="finalActions">
            <button class="ghostLarge" data-prev="gallery">&larr; Back</button>
            <button class="ghostLarge" id="restartBtn">Restart &#8634;</button>
          </div>
        </div>
      </div>
    </section>

  </main>

  <!-- LIGHTBOX / SLIDESHOW -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Photo slideshow" aria-hidden="true">
    <div class="lightboxInner">
      <button class="lbClose" id="lbClose" aria-label="Close slideshow">&#10005;</button>
      <button class="lbNav" id="lbPrev" aria-label="Previous photo">&#8249;</button>
      <img id="lbImg" alt="Slideshow image"/>
      <button class="lbNav" id="lbNext" aria-label="Next photo">&#8250;</button>
      <div class="lbCaption" id="lbCaption" aria-live="polite"></div>
    </div>
  </div>

  <!-- PDF Export Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <script src="app.js?v=8"></script>
</body>
</html>
